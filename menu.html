<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menu | Blue Harbor Coffee</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;600&family=Zen+Kaku+Gothic+New:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Zen Kaku Gothic New', sans-serif; color: #333; }
    .font-eng { font-family: 'Jost', sans-serif; }
    .page-enter { animation: fadeIn 0.6s ease-out forwards; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .nav-link.active { border-bottom: 2px solid #3b82f6; color: #1d4ed8; }
    .nav-link.active svg { color: #1d4ed8; }
    .menu-board {
      background-color: #1a1a1a;
      color: #f8f8f8;
      border: 12px solid #3d2b1f;
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    }
    .menu-board p {
      font-size: 15px;
      color: #d1d5db;
      line-height: 1.7;
      margin-top: 4px;
      letter-spacing: 0.02em;
    }
    @media (min-width:768px){
      .menu-board p { font-size:16px; }
    }
    .menu-list { display:flex; flex-direction:column; gap:40px; }
    .menu-item { display:flex; gap:20px; align-items:flex-start; }
    .menu-item img { width:112px; height:112px; object-fit:cover; }
  </style>

  <script>
    function syncMenuHeights() {
      const coffeeItems = document.querySelectorAll("#coffee .menu-item");
      const foodItems = document.querySelectorAll("#food .menu-item");
      const count = Math.min(coffeeItems.length, foodItems.length);

      for (let i = 0; i < count; i++) {
        coffeeItems[i].style.height = "auto";
        foodItems[i].style.height = "auto";
        const h = Math.max(coffeeItems[i].offsetHeight, foodItems[i].offsetHeight);
        coffeeItems[i].style.height = h + "px";
        foodItems[i].style.height = h + "px";
      }
    }

    async function loadMenu() {
      const res = await fetch("data/menu.json");
      const data = await res.json();

      renderSetMenu(data.setmenu);
      renderList(data.coffee, "coffee", "COFFEE", "DRIP & ESPRESSO");
      renderList(data.food, "food", "SWEETS & FOOD", "HOMEMADE");

      syncMenuHeights();
      window.addEventListener("resize", syncMenuHeights);
    }

    function renderSetMenu(list) {
      const el = document.getElementById("setmenu");

      el.innerHTML = `
        <h3 class="font-eng text-2xl font-bold border-b border-white/20 pb-2 mb-12 text-center">
          <span>SET MENU</span>
          <span class="block text-[10px] text-gray-500 tracking-widest mt-1">TIME-BASED</span>
        </h3>
        <div class="space-y-20"></div>
      `;

      const container = el.querySelector(".space-y-20");

      list.forEach(item => {
        const items = item.items.map(i => `<li>${i}</li>`).join("");

        container.innerHTML += `
          <div class="max-w-2xl mx-auto px-4 text-center">
            <div class="overflow-hidden w-full rounded shadow-md mb-8">
              <img src="${item.img}" class="w-full h-[40vw] object-contain hover:scale-120 transition duration-500">
            </div>

            <h4 class="font-bold text-xl leading-snug">
              <span class="whitespace-nowrap">
                ${item.ja}　
                <span class="font-eng text-blue-400">${item.price}</span>
              </span>
            </h4>

            <p class="text-sm text-gray-400 font-eng mt-1">${item.en}</p>
            <p class="text-sm text-gray-300 mt-3 tracking-wide">${item.time}</p>

            <ul class="text-base text-gray-200 space-y-2 mt-6 inline-block text-left leading-relaxed list-disc list-inside">
              ${items}
            </ul>
          </div>
        `;
      });
    }

    function renderList(list, id, titleMain, titleSub) {
      const el = document.getElementById(id);

      el.innerHTML = `
        <h3 class="font-eng text-2xl font-bold border-b border-white/20 pb-2 mb-10 flex justify-between items-center">
          <span>${titleMain}</span>
          <span class="text-[10px] text-gray-500 tracking-widest">${titleSub}</span>
        </h3>
        <div class="menu-list"></div>
      `;

      const container = el.querySelector(".menu-list");

      list.forEach(item => {
        container.innerHTML += `
          <div class="menu-item group flex items-center gap-4 mb-8">
            <div class="w-20 h-20 shrink-0 rounded shadow-md flex items-center justify-center overflow-hidden">
              <img src="${item.img}" class="max-w-full max-h-full object-contain hover:scale-120 transition duration-500">
            </div>

            <div class="flex-grow">
              <div class="flex justify-between items-baseline mb-1 gap-4">
                <h4 class="font-bold text-lg">
                  ${item.ja}<br>
                  <span class="text-xs text-gray-400 font-eng">${item.en}</span><br>
                  <span class="font-eng text-blue-400 sm:hidden">${item.price}</span>
                </h4>
                <span class="font-eng text-blue-400 hidden sm:inline">${item.price}</span>
              </div>
              <p class="text-xs text-gray-400 leading-relaxed">${item.desc}</p>
            </div>
          </div>
        `;
      });
    }

    window.addEventListener("DOMContentLoaded", loadMenu);
  </script>
</head>

<body class="bg-gray-100 flex flex-col min-h-screen">
  <div id="header"></div>  
  <main class="flex-grow pt-[112px] md:pt-28 bg-[url('https://images.unsplash.com/photo-1554118811-1e0d58224f24?auto=format&fit=crop&w=2000&q=80')] bg-cover bg-fixed">
    <div class="py-12 md:py-20 px-4">
      <div class="max-w-5xl mx-auto menu-board p-8 md:p-16 rounded-sm relative page-enter">

        <div class="text-center mb-16">
          <h2 class="text-4xl md:text-6xl font-eng font-bold tracking-tighter mb-2">TODAY'S MENU</h2>
          <p class="text-blue-400 font-eng text-sm tracking-widest uppercase">Freshly Roasted in our Harbor</p>
        </div>

        <!-- SET MENU -->
        <section id="setmenu" class="mb-20"></section>

        <div class="grid md:grid-cols-2 gap-16">
          <section id="coffee"></section>
          <section id="food"></section>
        </div>

        <div class="mt-20 pt-10 border-t border-white/10 text-center">
          <p class="text-gray-500 text-xs font-eng tracking-widest">
            価格は全て税抜き表示です。一部商品はお持ち帰りできます。
          </p>
        </div>

      </div>
    </div>
  </main>

  <footer class="bg-gray-50 border-t border-gray-200 py-12 text-center text-xs text-gray-400 font-eng">
    © 2024 Blue Harbor Coffee Roasters.
  </footer>
  <script src="js/loadHeader.js"></script>
</body>
</html>
